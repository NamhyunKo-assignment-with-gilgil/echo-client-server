# echo-client-server 프로젝트

## echo-client-server 실행 영상

https://youtu.be/Q9z6h6FaCis

## 과제 설명

- TCP 기반 에코 서버/클라이언트 구현
- 여러 클라이언트가 동시에 접속 가능하도록 멀티스레드 서버 구현
- 옵션에 따라 에코/브로드캐스트 동작 지원

## 공부 내용

### C++ 멀티스레드

- `std::thread`, `std::mutex`, `std::vector`를 이용한 동시성 제어
- 각 클라이언트 연결마다 독립적인 스레드에서 통신 처리

### TCP 통신 원리

- TCP는 스트림 기반이므로 메시지 경계가 없음
- 여러 클라이언트의 메시지가 합쳐져서 수신될 수 있음
- 안전한 송수신을 위해 구분자 또는 별도 스레드 사용

## 소스 코드 설명

### server/main.cpp

- `main()` 함수
    - 서버 소켓 생성 및 바인딩, 리스닝
    - 클라이언트 접속 시마다 새 스레드 생성(`handleClient`)
    - `-e` 옵션: 에코(클라이언트에게 받은 메시지 그대로 응답)
    - `-e -b` 옵션: 브로드캐스트(모든 클라이언트에게 메시지 전송)
    - 클라이언트 목록을 `std::vector<int>`로 관리, 동기화는 `std::mutex` 사용
- `handleClient()` 함수
    - 클라이언트와의 송수신 담당
    - 에코/브로드캐스트 동작 분기
    - 연결 종료 시 클라이언트 목록에서 제거
- `broadcastMessage()` 함수
    - 연결된 모든 클라이언트에게 메시지를 반복 전송
    - 전송 실패 시 해당 클라이언트를 목록에서 제거하여 안정성 유지

### client/main.cpp

- `main()` 함수
    - 서버에 TCP로 연결
    - 입력 스레드: 사용자 입력을 서버로 전송
    - 수신 스레드: 서버로부터 오는 모든 메시지를 실시간으로 출력
    - 여러 메시지가 합쳐져 와도 모두 출력 가능
